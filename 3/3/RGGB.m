function rgb = RGGB (I11,I12,I13)
[m, n] = size(I11);
%Img = cat(1, zeros(2,n,3),Img, zeros(2,n,3));
I11 = [ zeros(2,n);I11; zeros(2,n)];
I12 = [ zeros(2,n);I12; zeros(2,n)];
I13 = [ zeros(2,n);I13; zeros(2,n)];

%Img = cat(1, zeros(2,n,3),Img, zeros(2,n,3));
I11 = [ zeros(m+4,2),I11, zeros(m+4,2)];
I12 = [ zeros(m+4,2),I12, zeros(m+4,2)];
I13 = [ zeros(m+4,2),I13, zeros(m+4,2)];

for j = 5:2:n+1
        G(i-1, j-2) = I12(i-1, j-2);
        G(i-1, j) = I12(i-1, j);
   for i = 5:2:m+1
        G(i-2, j-1) = I12(i-2, j-1);
        G(i, j-1) = I12(i, j-1);        
        G(i-1, j-1) = (I12(i-2, j-1) + I12(i, j-1) + I12(i-1, j-2) + I12(i-1, j))/4;
        G(i-2, j-2) = (I12(i-3, j-2) + I12(i-1, j-2) + I12(i-2, j-1) +I12(i-2, j-3))/4;
        G(i, j-2) = (I12(i-1, j-2) + I12(i+1, j-2) + I12(i, j-3)+ I12(i, j-1))/4;
        G(i-2, j) = (I12(i-3, j-2) + I12(i-1, j-2) + I12(i-2, j-1) +I12(i-2, j+1))/4;
        G(i, j) = (I12(i-1, j) + I12(i+1, j) + I12(i, j-1) +I12(i, j+1))/4;
                
        R(i-2, j-2) = I11(i-2, j-2);
        R(i-2, j) = I11(i-2, j);
        R(i, j-2) = I11(i, j-2);
        R(i, j) = I11(i, j);
        R(i-2, j-1) = (I11(i-2, j-2) + I11(i-2, j))/2;
        R(i-1, j-2) = (I11(i-2, j-2) + I11(i, j-2))/2;
        R(i-1, j) = (I11(i-2, j) + I11(i, j))/2;
        R(i, j-1) = (I11(i, j-2) + I11(i, j))/2;        
        R(i-1, j-1) = (I11(i-2, j-2) + I11(i, j-2) + I11(i-2, j) + I11(i, j))/4;
        
        B(i-2, j-2) = (I13(i-3, j-2) + I13(i-1, j-2) + I13(i-2, j-3) + I13(i-2, j-1))/4;
        B(i, j-2) = (I13(i-1, j-3) + I13(i+1, j-3) + I13(i-1, j-1) + I13(i+1, j-1))/4;
        B(i, j) = (I13(i-1, j-1) + I13(i-1, j-1) + I13(i+1, j-3) + I13(i+1, j-1))/4;
        B(i-2, j) = (I13(i-1,j-1) + I13(i+1, j-1) + I13(i-1, j+1) + I13(i+1,j+1))/4;
        B(i-2, j-1) = (I13(i-1, j-1) + I13(i-3, j-1))/2;
        B(i-1, j-2) = (I13(i-1, j-3) + I13(i-1, j-1))/2;
        B(i, j-1) = (I13(i-1, j-1) + I13(i+1, j-1))/2;
        B(i-1, j) = (I13(i-1, j-1) + I13(i-1, j+1))/2;
        B(i-1, j-1) = I13(i-1, j-1);
    end
end
rgb = zeros(197,261,3);
rgb(:,:,1) = R(3:199,3:263);
rgb(:,:,2) = G(3:199,3:263);
rgb(:,:,3) = B(3:199,3:263);
rgb = cat(3,R(3:199,3:263),G(3:199,3:263),B(3:199,3:263));
rgb = uint8(rgb/2^8);
end